我们写一下最高位为 1 的情形的公式：

我们先不妨把所有常系数全除成 1，在最后答案中我们再乘回来就好。

我们要求的是：

$$
G(x) = \sum_{i_1,...,i_n} f_1(i_1)...f_n(i_n) x^{i_1 \oplus i_2 \oplus ...i_n}
$$

其中每一个 $f_i(x)$ 只在 0 和第 $i$ 项的取值非 0.

于是公式可以进一步写成：

$$
G(x) = \sum_{S\subseteq \{1,...,n\}}x^{\bigoplus_{i\in S}i} \prod_{i\in S} f(i)
$$

采取分治策略，记所有最高位为 0 的 $i$ 所对应的序列的异或卷积为 $A(x)$, 最高次项为 1 的为 $B(x)$

$A(x)$ 是一个递归子问题，但 $B(x)$ 并不是。

但根据上面的公式，我们发现，B 中最高位为 1 的值来源于所有大小为奇数的子集的积之和，最高位为 0 的值来源于大小为偶数的子集的积之和。

所以我们分别记 $A(x, 0)$ 表示偶数大小子集的积之和，$A(x,1)$ 表示奇数大小子集的积之和.

即 
$$
A(x, i) = \sum_{S\subseteq \{1,...,n\}, |S| \bmod 2 \,\equiv \,i}x^{\bigoplus_{i\in S}i} \prod_{i\in S} f(i)
$$

那么 $G(x, 0) = A(x, 0) * B(x,0) + A(x,1) * B(x,1)
$
$
G(x,1)=A(x,0)*B(x,1)+A(x,1)*B(x,0)
$
